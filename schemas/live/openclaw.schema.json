{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "meta": {
      "type": "object",
      "properties": {
        "lastTouchedVersion": {
          "type": "string"
        },
        "lastTouchedAt": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "env": {
      "type": "object",
      "properties": {
        "shellEnv": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "timeoutMs": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "vars": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "additionalProperties": {
        "type": "string"
      }
    },
    "wizard": {
      "type": "object",
      "properties": {
        "lastRunAt": {
          "type": "string"
        },
        "lastRunVersion": {
          "type": "string"
        },
        "lastRunCommit": {
          "type": "string"
        },
        "lastRunCommand": {
          "type": "string"
        },
        "lastRunMode": {
          "anyOf": [
            {
              "type": "string",
              "const": "local"
            },
            {
              "type": "string",
              "const": "remote"
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "diagnostics": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "flags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "otel": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "endpoint": {
              "type": "string"
            },
            "protocol": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "http/protobuf"
                },
                {
                  "type": "string",
                  "const": "grpc"
                }
              ]
            },
            "headers": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "string"
              }
            },
            "serviceName": {
              "type": "string"
            },
            "traces": {
              "type": "boolean"
            },
            "metrics": {
              "type": "boolean"
            },
            "logs": {
              "type": "boolean"
            },
            "sampleRate": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "flushIntervalMs": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "cacheTrace": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "filePath": {
              "type": "string"
            },
            "includeMessages": {
              "type": "boolean"
            },
            "includePrompt": {
              "type": "boolean"
            },
            "includeSystem": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "logging": {
      "type": "object",
      "properties": {
        "level": {
          "anyOf": [
            {
              "type": "string",
              "const": "silent"
            },
            {
              "type": "string",
              "const": "fatal"
            },
            {
              "type": "string",
              "const": "error"
            },
            {
              "type": "string",
              "const": "warn"
            },
            {
              "type": "string",
              "const": "info"
            },
            {
              "type": "string",
              "const": "debug"
            },
            {
              "type": "string",
              "const": "trace"
            }
          ]
        },
        "file": {
          "type": "string"
        },
        "consoleLevel": {
          "anyOf": [
            {
              "type": "string",
              "const": "silent"
            },
            {
              "type": "string",
              "const": "fatal"
            },
            {
              "type": "string",
              "const": "error"
            },
            {
              "type": "string",
              "const": "warn"
            },
            {
              "type": "string",
              "const": "info"
            },
            {
              "type": "string",
              "const": "debug"
            },
            {
              "type": "string",
              "const": "trace"
            }
          ]
        },
        "consoleStyle": {
          "anyOf": [
            {
              "type": "string",
              "const": "pretty"
            },
            {
              "type": "string",
              "const": "compact"
            },
            {
              "type": "string",
              "const": "json"
            }
          ]
        },
        "redactSensitive": {
          "anyOf": [
            {
              "type": "string",
              "const": "off"
            },
            {
              "type": "string",
              "const": "tools"
            }
          ]
        },
        "redactPatterns": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "update": {
      "type": "object",
      "properties": {
        "channel": {
          "anyOf": [
            {
              "type": "string",
              "const": "stable"
            },
            {
              "type": "string",
              "const": "beta"
            },
            {
              "type": "string",
              "const": "dev"
            }
          ]
        },
        "checkOnStart": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "browser": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "evaluateEnabled": {
          "type": "boolean"
        },
        "cdpUrl": {
          "type": "string"
        },
        "remoteCdpTimeoutMs": {
          "type": "integer",
          "minimum": 0,
          "maximum": 9007199254740991
        },
        "remoteCdpHandshakeTimeoutMs": {
          "type": "integer",
          "minimum": 0,
          "maximum": 9007199254740991
        },
        "color": {
          "type": "string"
        },
        "executablePath": {
          "type": "string"
        },
        "headless": {
          "type": "boolean"
        },
        "noSandbox": {
          "type": "boolean"
        },
        "attachOnly": {
          "type": "boolean"
        },
        "defaultProfile": {
          "type": "string"
        },
        "snapshotDefaults": {
          "type": "object",
          "properties": {
            "mode": {
              "type": "string",
              "const": "efficient"
            }
          },
          "additionalProperties": false
        },
        "profiles": {
          "type": "object",
          "propertyNames": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "cdpPort": {
                "type": "integer",
                "minimum": 1,
                "maximum": 65535
              },
              "cdpUrl": {
                "type": "string"
              },
              "driver": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "clawd"
                  },
                  {
                    "type": "string",
                    "const": "extension"
                  }
                ]
              },
              "color": {
                "type": "string",
                "pattern": "^#?[0-9a-fA-F]{6}$"
              }
            },
            "required": [
              "color"
            ],
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "ui": {
      "type": "object",
      "properties": {
        "seamColor": {
          "type": "string",
          "pattern": "^#?[0-9a-fA-F]{6}$"
        },
        "assistant": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "maxLength": 50
            },
            "avatar": {
              "type": "string",
              "maxLength": 200
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "auth": {
      "type": "object",
      "properties": {
        "profiles": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "provider": {
                "type": "string"
              },
              "mode": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "api_key"
                  },
                  {
                    "type": "string",
                    "const": "oauth"
                  },
                  {
                    "type": "string",
                    "const": "token"
                  }
                ]
              },
              "email": {
                "type": "string"
              }
            },
            "required": [
              "provider",
              "mode"
            ],
            "additionalProperties": false
          }
        },
        "order": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "cooldowns": {
          "type": "object",
          "properties": {
            "billingBackoffHours": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "billingBackoffHoursByProvider": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "number",
                "exclusiveMinimum": 0
              }
            },
            "billingMaxHours": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "failureWindowHours": {
              "type": "number",
              "exclusiveMinimum": 0
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "models": {
      "type": "object",
      "properties": {
        "mode": {
          "anyOf": [
            {
              "type": "string",
              "const": "merge"
            },
            {
              "type": "string",
              "const": "replace"
            }
          ]
        },
        "providers": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "baseUrl": {
                "type": "string",
                "minLength": 1
              },
              "apiKey": {
                "type": "string"
              },
              "auth": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "api-key"
                  },
                  {
                    "type": "string",
                    "const": "aws-sdk"
                  },
                  {
                    "type": "string",
                    "const": "oauth"
                  },
                  {
                    "type": "string",
                    "const": "token"
                  }
                ]
              },
              "api": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "openai-completions"
                  },
                  {
                    "type": "string",
                    "const": "openai-responses"
                  },
                  {
                    "type": "string",
                    "const": "anthropic-messages"
                  },
                  {
                    "type": "string",
                    "const": "google-generative-ai"
                  },
                  {
                    "type": "string",
                    "const": "github-copilot"
                  },
                  {
                    "type": "string",
                    "const": "bedrock-converse-stream"
                  },
                  {
                    "type": "string",
                    "const": "ollama"
                  }
                ]
              },
              "headers": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {
                  "type": "string"
                }
              },
              "authHeader": {
                "type": "boolean"
              },
              "models": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "minLength": 1
                    },
                    "name": {
                      "type": "string",
                      "minLength": 1
                    },
                    "api": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "openai-completions"
                        },
                        {
                          "type": "string",
                          "const": "openai-responses"
                        },
                        {
                          "type": "string",
                          "const": "anthropic-messages"
                        },
                        {
                          "type": "string",
                          "const": "google-generative-ai"
                        },
                        {
                          "type": "string",
                          "const": "github-copilot"
                        },
                        {
                          "type": "string",
                          "const": "bedrock-converse-stream"
                        },
                        {
                          "type": "string",
                          "const": "ollama"
                        }
                      ]
                    },
                    "reasoning": {
                      "type": "boolean"
                    },
                    "input": {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "text"
                          },
                          {
                            "type": "string",
                            "const": "image"
                          }
                        ]
                      }
                    },
                    "cost": {
                      "type": "object",
                      "properties": {
                        "input": {
                          "type": "number"
                        },
                        "output": {
                          "type": "number"
                        },
                        "cacheRead": {
                          "type": "number"
                        },
                        "cacheWrite": {
                          "type": "number"
                        }
                      },
                      "additionalProperties": false
                    },
                    "contextWindow": {
                      "type": "number",
                      "exclusiveMinimum": 0
                    },
                    "maxTokens": {
                      "type": "number",
                      "exclusiveMinimum": 0
                    },
                    "headers": {
                      "type": "object",
                      "propertyNames": {
                        "type": "string"
                      },
                      "additionalProperties": {
                        "type": "string"
                      }
                    },
                    "compat": {
                      "type": "object",
                      "properties": {
                        "supportsStore": {
                          "type": "boolean"
                        },
                        "supportsDeveloperRole": {
                          "type": "boolean"
                        },
                        "supportsReasoningEffort": {
                          "type": "boolean"
                        },
                        "supportsUsageInStreaming": {
                          "type": "boolean"
                        },
                        "supportsStrictMode": {
                          "type": "boolean"
                        },
                        "maxTokensField": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "max_completion_tokens"
                            },
                            {
                              "type": "string",
                              "const": "max_tokens"
                            }
                          ]
                        },
                        "thinkingFormat": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "openai"
                            },
                            {
                              "type": "string",
                              "const": "zai"
                            },
                            {
                              "type": "string",
                              "const": "qwen"
                            }
                          ]
                        },
                        "requiresToolResultName": {
                          "type": "boolean"
                        },
                        "requiresAssistantAfterToolResult": {
                          "type": "boolean"
                        },
                        "requiresThinkingAsText": {
                          "type": "boolean"
                        },
                        "requiresMistralToolIds": {
                          "type": "boolean"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "name"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "baseUrl",
              "models"
            ],
            "additionalProperties": false
          }
        },
        "bedrockDiscovery": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "region": {
              "type": "string"
            },
            "providerFilter": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "refreshInterval": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            },
            "defaultContextWindow": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "defaultMaxTokens": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "nodeHost": {
      "type": "object",
      "properties": {
        "browserProxy": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "allowProfiles": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "agents": {
      "type": "object",
      "properties": {
        "defaults": {
          "type": "object",
          "properties": {
            "model": {
              "type": "object",
              "properties": {
                "primary": {
                  "type": "string"
                },
                "fallbacks": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "imageModel": {
              "type": "object",
              "properties": {
                "primary": {
                  "type": "string"
                },
                "fallbacks": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "models": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "alias": {
                    "type": "string"
                  },
                  "params": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {}
                  },
                  "streaming": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              }
            },
            "workspace": {
              "type": "string"
            },
            "repoRoot": {
              "type": "string"
            },
            "skipBootstrap": {
              "type": "boolean"
            },
            "bootstrapMaxChars": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "bootstrapTotalMaxChars": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "userTimezone": {
              "type": "string"
            },
            "timeFormat": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "auto"
                },
                {
                  "type": "string",
                  "const": "12"
                },
                {
                  "type": "string",
                  "const": "24"
                }
              ]
            },
            "envelopeTimezone": {
              "type": "string"
            },
            "envelopeTimestamp": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "on"
                },
                {
                  "type": "string",
                  "const": "off"
                }
              ]
            },
            "envelopeElapsed": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "on"
                },
                {
                  "type": "string",
                  "const": "off"
                }
              ]
            },
            "contextTokens": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "cliBackends": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "command": {
                    "type": "string"
                  },
                  "args": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "output": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "json"
                      },
                      {
                        "type": "string",
                        "const": "text"
                      },
                      {
                        "type": "string",
                        "const": "jsonl"
                      }
                    ]
                  },
                  "resumeOutput": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "json"
                      },
                      {
                        "type": "string",
                        "const": "text"
                      },
                      {
                        "type": "string",
                        "const": "jsonl"
                      }
                    ]
                  },
                  "input": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "arg"
                      },
                      {
                        "type": "string",
                        "const": "stdin"
                      }
                    ]
                  },
                  "maxPromptArgChars": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  },
                  "env": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "clearEnv": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "modelArg": {
                    "type": "string"
                  },
                  "modelAliases": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "sessionArg": {
                    "type": "string"
                  },
                  "sessionArgs": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "resumeArgs": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "sessionMode": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "always"
                      },
                      {
                        "type": "string",
                        "const": "existing"
                      },
                      {
                        "type": "string",
                        "const": "none"
                      }
                    ]
                  },
                  "sessionIdFields": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "systemPromptArg": {
                    "type": "string"
                  },
                  "systemPromptMode": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "append"
                      },
                      {
                        "type": "string",
                        "const": "replace"
                      }
                    ]
                  },
                  "systemPromptWhen": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "first"
                      },
                      {
                        "type": "string",
                        "const": "always"
                      },
                      {
                        "type": "string",
                        "const": "never"
                      }
                    ]
                  },
                  "imageArg": {
                    "type": "string"
                  },
                  "imageMode": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "repeat"
                      },
                      {
                        "type": "string",
                        "const": "list"
                      }
                    ]
                  },
                  "serialize": {
                    "type": "boolean"
                  },
                  "reliability": {
                    "type": "object",
                    "properties": {
                      "watchdog": {
                        "type": "object",
                        "properties": {
                          "fresh": {
                            "type": "object",
                            "properties": {
                              "noOutputTimeoutMs": {
                                "type": "integer",
                                "minimum": 1000,
                                "maximum": 9007199254740991
                              },
                              "noOutputTimeoutRatio": {
                                "type": "number",
                                "minimum": 0.05,
                                "maximum": 0.95
                              },
                              "minMs": {
                                "type": "integer",
                                "minimum": 1000,
                                "maximum": 9007199254740991
                              },
                              "maxMs": {
                                "type": "integer",
                                "minimum": 1000,
                                "maximum": 9007199254740991
                              }
                            },
                            "additionalProperties": false
                          },
                          "resume": {
                            "type": "object",
                            "properties": {
                              "noOutputTimeoutMs": {
                                "type": "integer",
                                "minimum": 1000,
                                "maximum": 9007199254740991
                              },
                              "noOutputTimeoutRatio": {
                                "type": "number",
                                "minimum": 0.05,
                                "maximum": 0.95
                              },
                              "minMs": {
                                "type": "integer",
                                "minimum": 1000,
                                "maximum": 9007199254740991
                              },
                              "maxMs": {
                                "type": "integer",
                                "minimum": 1000,
                                "maximum": 9007199254740991
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "required": [
                  "command"
                ],
                "additionalProperties": false
              }
            },
            "memorySearch": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "sources": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "memory"
                      },
                      {
                        "type": "string",
                        "const": "sessions"
                      }
                    ]
                  }
                },
                "extraPaths": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "experimental": {
                  "type": "object",
                  "properties": {
                    "sessionMemory": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                },
                "provider": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "openai"
                    },
                    {
                      "type": "string",
                      "const": "local"
                    },
                    {
                      "type": "string",
                      "const": "gemini"
                    },
                    {
                      "type": "string",
                      "const": "voyage"
                    }
                  ]
                },
                "remote": {
                  "type": "object",
                  "properties": {
                    "baseUrl": {
                      "type": "string"
                    },
                    "apiKey": {
                      "type": "string"
                    },
                    "headers": {
                      "type": "object",
                      "propertyNames": {
                        "type": "string"
                      },
                      "additionalProperties": {
                        "type": "string"
                      }
                    },
                    "batch": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean"
                        },
                        "wait": {
                          "type": "boolean"
                        },
                        "concurrency": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "pollIntervalMs": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 9007199254740991
                        },
                        "timeoutMinutes": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                },
                "fallback": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "openai"
                    },
                    {
                      "type": "string",
                      "const": "gemini"
                    },
                    {
                      "type": "string",
                      "const": "local"
                    },
                    {
                      "type": "string",
                      "const": "voyage"
                    },
                    {
                      "type": "string",
                      "const": "none"
                    }
                  ]
                },
                "model": {
                  "type": "string"
                },
                "local": {
                  "type": "object",
                  "properties": {
                    "modelPath": {
                      "type": "string"
                    },
                    "modelCacheDir": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "store": {
                  "type": "object",
                  "properties": {
                    "driver": {
                      "type": "string",
                      "const": "sqlite"
                    },
                    "path": {
                      "type": "string"
                    },
                    "vector": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean"
                        },
                        "extensionPath": {
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                },
                "chunking": {
                  "type": "object",
                  "properties": {
                    "tokens": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "overlap": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    }
                  },
                  "additionalProperties": false
                },
                "sync": {
                  "type": "object",
                  "properties": {
                    "onSessionStart": {
                      "type": "boolean"
                    },
                    "onSearch": {
                      "type": "boolean"
                    },
                    "watch": {
                      "type": "boolean"
                    },
                    "watchDebounceMs": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "intervalMinutes": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "sessions": {
                      "type": "object",
                      "properties": {
                        "deltaBytes": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 9007199254740991
                        },
                        "deltaMessages": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 9007199254740991
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                },
                "query": {
                  "type": "object",
                  "properties": {
                    "maxResults": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "minScore": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "hybrid": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean"
                        },
                        "vectorWeight": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 1
                        },
                        "textWeight": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 1
                        },
                        "candidateMultiplier": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "mmr": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean"
                            },
                            "lambda": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 1
                            }
                          },
                          "additionalProperties": false
                        },
                        "temporalDecay": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean"
                            },
                            "halfLifeDays": {
                              "type": "integer",
                              "exclusiveMinimum": 0,
                              "maximum": 9007199254740991
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                },
                "cache": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "maxEntries": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "contextPruning": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "off"
                    },
                    {
                      "type": "string",
                      "const": "cache-ttl"
                    }
                  ]
                },
                "ttl": {
                  "type": "string"
                },
                "keepLastAssistants": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "softTrimRatio": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                "hardClearRatio": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                "minPrunableToolChars": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "tools": {
                  "type": "object",
                  "properties": {
                    "allow": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "deny": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "softTrim": {
                  "type": "object",
                  "properties": {
                    "maxChars": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "headChars": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "tailChars": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    }
                  },
                  "additionalProperties": false
                },
                "hardClear": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "placeholder": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "compaction": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "default"
                    },
                    {
                      "type": "string",
                      "const": "safeguard"
                    }
                  ]
                },
                "reserveTokensFloor": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "maxHistoryShare": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 0.9
                },
                "memoryFlush": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "softThresholdTokens": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "prompt": {
                      "type": "string"
                    },
                    "systemPrompt": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "thinkingDefault": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "minimal"
                },
                {
                  "type": "string",
                  "const": "low"
                },
                {
                  "type": "string",
                  "const": "medium"
                },
                {
                  "type": "string",
                  "const": "high"
                },
                {
                  "type": "string",
                  "const": "xhigh"
                }
              ]
            },
            "verboseDefault": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "on"
                },
                {
                  "type": "string",
                  "const": "full"
                }
              ]
            },
            "elevatedDefault": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "on"
                },
                {
                  "type": "string",
                  "const": "ask"
                },
                {
                  "type": "string",
                  "const": "full"
                }
              ]
            },
            "blockStreamingDefault": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "on"
                }
              ]
            },
            "blockStreamingBreak": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "text_end"
                },
                {
                  "type": "string",
                  "const": "message_end"
                }
              ]
            },
            "blockStreamingChunk": {
              "type": "object",
              "properties": {
                "minChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "breakPreference": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "paragraph"
                    },
                    {
                      "type": "string",
                      "const": "newline"
                    },
                    {
                      "type": "string",
                      "const": "sentence"
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "blockStreamingCoalesce": {
              "type": "object",
              "properties": {
                "minChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "idleMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "humanDelay": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "off"
                    },
                    {
                      "type": "string",
                      "const": "natural"
                    },
                    {
                      "type": "string",
                      "const": "custom"
                    }
                  ]
                },
                "minMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "maxMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "timeoutSeconds": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "mediaMaxMb": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "imageMaxDimensionPx": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "typingIntervalSeconds": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "typingMode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "never"
                },
                {
                  "type": "string",
                  "const": "instant"
                },
                {
                  "type": "string",
                  "const": "thinking"
                },
                {
                  "type": "string",
                  "const": "message"
                }
              ]
            },
            "heartbeat": {
              "type": "object",
              "properties": {
                "every": {
                  "type": "string"
                },
                "activeHours": {
                  "type": "object",
                  "properties": {
                    "start": {
                      "type": "string"
                    },
                    "end": {
                      "type": "string"
                    },
                    "timezone": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "model": {
                  "type": "string"
                },
                "session": {
                  "type": "string"
                },
                "includeReasoning": {
                  "type": "boolean"
                },
                "target": {
                  "type": "string"
                },
                "to": {
                  "type": "string"
                },
                "accountId": {
                  "type": "string"
                },
                "prompt": {
                  "type": "string"
                },
                "ackMaxChars": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "suppressToolErrorWarnings": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false
            },
            "maxConcurrent": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "subagents": {
              "type": "object",
              "properties": {
                "maxConcurrent": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxSpawnDepth": {
                  "description": "Maximum nesting depth for sub-agent spawning. 1 = no nesting (default), 2 = sub-agents can spawn sub-sub-agents.",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 5
                },
                "maxChildrenPerAgent": {
                  "description": "Maximum number of active children a single agent session can spawn (default: 5).",
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 20
                },
                "archiveAfterMinutes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "model": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "primary": {
                          "type": "string"
                        },
                        "fallbacks": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "additionalProperties": false
                    }
                  ]
                },
                "thinking": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "sandbox": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "off"
                    },
                    {
                      "type": "string",
                      "const": "non-main"
                    },
                    {
                      "type": "string",
                      "const": "all"
                    }
                  ]
                },
                "workspaceAccess": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "none"
                    },
                    {
                      "type": "string",
                      "const": "ro"
                    },
                    {
                      "type": "string",
                      "const": "rw"
                    }
                  ]
                },
                "sessionToolsVisibility": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "spawned"
                    },
                    {
                      "type": "string",
                      "const": "all"
                    }
                  ]
                },
                "scope": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "session"
                    },
                    {
                      "type": "string",
                      "const": "agent"
                    },
                    {
                      "type": "string",
                      "const": "shared"
                    }
                  ]
                },
                "perSession": {
                  "type": "boolean"
                },
                "workspaceRoot": {
                  "type": "string"
                },
                "docker": {
                  "type": "object",
                  "properties": {
                    "image": {
                      "type": "string"
                    },
                    "containerPrefix": {
                      "type": "string"
                    },
                    "workdir": {
                      "type": "string"
                    },
                    "readOnlyRoot": {
                      "type": "boolean"
                    },
                    "tmpfs": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "network": {
                      "type": "string"
                    },
                    "user": {
                      "type": "string"
                    },
                    "capDrop": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "env": {
                      "type": "object",
                      "propertyNames": {
                        "type": "string"
                      },
                      "additionalProperties": {
                        "type": "string"
                      }
                    },
                    "setupCommand": {
                      "type": "string"
                    },
                    "pidsLimit": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "memory": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        }
                      ]
                    },
                    "memorySwap": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        }
                      ]
                    },
                    "cpus": {
                      "type": "number",
                      "exclusiveMinimum": 0
                    },
                    "ulimits": {
                      "type": "object",
                      "propertyNames": {
                        "type": "string"
                      },
                      "additionalProperties": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "soft": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 9007199254740991
                              },
                              "hard": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 9007199254740991
                              }
                            },
                            "additionalProperties": false
                          }
                        ]
                      }
                    },
                    "seccompProfile": {
                      "type": "string"
                    },
                    "apparmorProfile": {
                      "type": "string"
                    },
                    "dns": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "extraHosts": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "binds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "browser": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "image": {
                      "type": "string"
                    },
                    "containerPrefix": {
                      "type": "string"
                    },
                    "cdpPort": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "vncPort": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "noVncPort": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "headless": {
                      "type": "boolean"
                    },
                    "enableNoVnc": {
                      "type": "boolean"
                    },
                    "allowHostControl": {
                      "type": "boolean"
                    },
                    "autoStart": {
                      "type": "boolean"
                    },
                    "autoStartTimeoutMs": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "binds": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "prune": {
                  "type": "object",
                  "properties": {
                    "idleHours": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "maxAgeDays": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "list": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "default": {
                "type": "boolean"
              },
              "name": {
                "type": "string"
              },
              "workspace": {
                "type": "string"
              },
              "agentDir": {
                "type": "string"
              },
              "model": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "primary": {
                        "type": "string"
                      },
                      "fallbacks": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                ]
              },
              "skills": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "memorySearch": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  },
                  "sources": {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "memory"
                        },
                        {
                          "type": "string",
                          "const": "sessions"
                        }
                      ]
                    }
                  },
                  "extraPaths": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "experimental": {
                    "type": "object",
                    "properties": {
                      "sessionMemory": {
                        "type": "boolean"
                      }
                    },
                    "additionalProperties": false
                  },
                  "provider": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "openai"
                      },
                      {
                        "type": "string",
                        "const": "local"
                      },
                      {
                        "type": "string",
                        "const": "gemini"
                      },
                      {
                        "type": "string",
                        "const": "voyage"
                      }
                    ]
                  },
                  "remote": {
                    "type": "object",
                    "properties": {
                      "baseUrl": {
                        "type": "string"
                      },
                      "apiKey": {
                        "type": "string"
                      },
                      "headers": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "batch": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          },
                          "wait": {
                            "type": "boolean"
                          },
                          "concurrency": {
                            "type": "integer",
                            "exclusiveMinimum": 0,
                            "maximum": 9007199254740991
                          },
                          "pollIntervalMs": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 9007199254740991
                          },
                          "timeoutMinutes": {
                            "type": "integer",
                            "exclusiveMinimum": 0,
                            "maximum": 9007199254740991
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  },
                  "fallback": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "openai"
                      },
                      {
                        "type": "string",
                        "const": "gemini"
                      },
                      {
                        "type": "string",
                        "const": "local"
                      },
                      {
                        "type": "string",
                        "const": "voyage"
                      },
                      {
                        "type": "string",
                        "const": "none"
                      }
                    ]
                  },
                  "model": {
                    "type": "string"
                  },
                  "local": {
                    "type": "object",
                    "properties": {
                      "modelPath": {
                        "type": "string"
                      },
                      "modelCacheDir": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  },
                  "store": {
                    "type": "object",
                    "properties": {
                      "driver": {
                        "type": "string",
                        "const": "sqlite"
                      },
                      "path": {
                        "type": "string"
                      },
                      "vector": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          },
                          "extensionPath": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  },
                  "chunking": {
                    "type": "object",
                    "properties": {
                      "tokens": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "overlap": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                      }
                    },
                    "additionalProperties": false
                  },
                  "sync": {
                    "type": "object",
                    "properties": {
                      "onSessionStart": {
                        "type": "boolean"
                      },
                      "onSearch": {
                        "type": "boolean"
                      },
                      "watch": {
                        "type": "boolean"
                      },
                      "watchDebounceMs": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                      },
                      "intervalMinutes": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                      },
                      "sessions": {
                        "type": "object",
                        "properties": {
                          "deltaBytes": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 9007199254740991
                          },
                          "deltaMessages": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 9007199254740991
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  },
                  "query": {
                    "type": "object",
                    "properties": {
                      "maxResults": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "minScore": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "hybrid": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          },
                          "vectorWeight": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1
                          },
                          "textWeight": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1
                          },
                          "candidateMultiplier": {
                            "type": "integer",
                            "exclusiveMinimum": 0,
                            "maximum": 9007199254740991
                          },
                          "mmr": {
                            "type": "object",
                            "properties": {
                              "enabled": {
                                "type": "boolean"
                              },
                              "lambda": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 1
                              }
                            },
                            "additionalProperties": false
                          },
                          "temporalDecay": {
                            "type": "object",
                            "properties": {
                              "enabled": {
                                "type": "boolean"
                              },
                              "halfLifeDays": {
                                "type": "integer",
                                "exclusiveMinimum": 0,
                                "maximum": 9007199254740991
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  },
                  "cache": {
                    "type": "object",
                    "properties": {
                      "enabled": {
                        "type": "boolean"
                      },
                      "maxEntries": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              },
              "humanDelay": {
                "type": "object",
                "properties": {
                  "mode": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "off"
                      },
                      {
                        "type": "string",
                        "const": "natural"
                      },
                      {
                        "type": "string",
                        "const": "custom"
                      }
                    ]
                  },
                  "minMs": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 9007199254740991
                  },
                  "maxMs": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 9007199254740991
                  }
                },
                "additionalProperties": false
              },
              "heartbeat": {
                "type": "object",
                "properties": {
                  "every": {
                    "type": "string"
                  },
                  "activeHours": {
                    "type": "object",
                    "properties": {
                      "start": {
                        "type": "string"
                      },
                      "end": {
                        "type": "string"
                      },
                      "timezone": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  },
                  "model": {
                    "type": "string"
                  },
                  "session": {
                    "type": "string"
                  },
                  "includeReasoning": {
                    "type": "boolean"
                  },
                  "target": {
                    "type": "string"
                  },
                  "to": {
                    "type": "string"
                  },
                  "accountId": {
                    "type": "string"
                  },
                  "prompt": {
                    "type": "string"
                  },
                  "ackMaxChars": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 9007199254740991
                  },
                  "suppressToolErrorWarnings": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              },
              "identity": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "theme": {
                    "type": "string"
                  },
                  "emoji": {
                    "type": "string"
                  },
                  "avatar": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "groupChat": {
                "type": "object",
                "properties": {
                  "mentionPatterns": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "historyLimit": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  }
                },
                "additionalProperties": false
              },
              "subagents": {
                "type": "object",
                "properties": {
                  "allowAgents": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "model": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "object",
                        "properties": {
                          "primary": {
                            "type": "string"
                          },
                          "fallbacks": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        },
                        "additionalProperties": false
                      }
                    ]
                  },
                  "thinking": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "sandbox": {
                "type": "object",
                "properties": {
                  "mode": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "off"
                      },
                      {
                        "type": "string",
                        "const": "non-main"
                      },
                      {
                        "type": "string",
                        "const": "all"
                      }
                    ]
                  },
                  "workspaceAccess": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "none"
                      },
                      {
                        "type": "string",
                        "const": "ro"
                      },
                      {
                        "type": "string",
                        "const": "rw"
                      }
                    ]
                  },
                  "sessionToolsVisibility": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "spawned"
                      },
                      {
                        "type": "string",
                        "const": "all"
                      }
                    ]
                  },
                  "scope": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "session"
                      },
                      {
                        "type": "string",
                        "const": "agent"
                      },
                      {
                        "type": "string",
                        "const": "shared"
                      }
                    ]
                  },
                  "perSession": {
                    "type": "boolean"
                  },
                  "workspaceRoot": {
                    "type": "string"
                  },
                  "docker": {
                    "type": "object",
                    "properties": {
                      "image": {
                        "type": "string"
                      },
                      "containerPrefix": {
                        "type": "string"
                      },
                      "workdir": {
                        "type": "string"
                      },
                      "readOnlyRoot": {
                        "type": "boolean"
                      },
                      "tmpfs": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "network": {
                        "type": "string"
                      },
                      "user": {
                        "type": "string"
                      },
                      "capDrop": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "env": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "setupCommand": {
                        "type": "string"
                      },
                      "pidsLimit": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "memory": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          }
                        ]
                      },
                      "memorySwap": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          }
                        ]
                      },
                      "cpus": {
                        "type": "number",
                        "exclusiveMinimum": 0
                      },
                      "ulimits": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "number"
                            },
                            {
                              "type": "object",
                              "properties": {
                                "soft": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "maximum": 9007199254740991
                                },
                                "hard": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "maximum": 9007199254740991
                                }
                              },
                              "additionalProperties": false
                            }
                          ]
                        }
                      },
                      "seccompProfile": {
                        "type": "string"
                      },
                      "apparmorProfile": {
                        "type": "string"
                      },
                      "dns": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "extraHosts": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "binds": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    "additionalProperties": false
                  },
                  "browser": {
                    "type": "object",
                    "properties": {
                      "enabled": {
                        "type": "boolean"
                      },
                      "image": {
                        "type": "string"
                      },
                      "containerPrefix": {
                        "type": "string"
                      },
                      "cdpPort": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "vncPort": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "noVncPort": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "headless": {
                        "type": "boolean"
                      },
                      "enableNoVnc": {
                        "type": "boolean"
                      },
                      "allowHostControl": {
                        "type": "boolean"
                      },
                      "autoStart": {
                        "type": "boolean"
                      },
                      "autoStartTimeoutMs": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "binds": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    "additionalProperties": false
                  },
                  "prune": {
                    "type": "object",
                    "properties": {
                      "idleHours": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                      },
                      "maxAgeDays": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              },
              "tools": {
                "type": "object",
                "properties": {
                  "profile": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "minimal"
                      },
                      {
                        "type": "string",
                        "const": "coding"
                      },
                      {
                        "type": "string",
                        "const": "messaging"
                      },
                      {
                        "type": "string",
                        "const": "full"
                      }
                    ]
                  },
                  "allow": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "alsoAllow": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "deny": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "byProvider": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "type": "object",
                      "properties": {
                        "allow": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "alsoAllow": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "deny": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "profile": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "minimal"
                            },
                            {
                              "type": "string",
                              "const": "coding"
                            },
                            {
                              "type": "string",
                              "const": "messaging"
                            },
                            {
                              "type": "string",
                              "const": "full"
                            }
                          ]
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "elevated": {
                    "type": "object",
                    "properties": {
                      "enabled": {
                        "type": "boolean"
                      },
                      "allowFrom": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "number"
                              }
                            ]
                          }
                        }
                      }
                    },
                    "additionalProperties": false
                  },
                  "exec": {
                    "type": "object",
                    "properties": {
                      "host": {
                        "type": "string",
                        "enum": [
                          "sandbox",
                          "gateway",
                          "node"
                        ]
                      },
                      "security": {
                        "type": "string",
                        "enum": [
                          "deny",
                          "allowlist",
                          "full"
                        ]
                      },
                      "ask": {
                        "type": "string",
                        "enum": [
                          "off",
                          "on-miss",
                          "always"
                        ]
                      },
                      "node": {
                        "type": "string"
                      },
                      "pathPrepend": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "safeBins": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "backgroundMs": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "timeoutSec": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "cleanupMs": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "notifyOnExit": {
                        "type": "boolean"
                      },
                      "notifyOnExitEmptySuccess": {
                        "type": "boolean"
                      },
                      "applyPatch": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          },
                          "workspaceOnly": {
                            "type": "boolean"
                          },
                          "allowModels": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        },
                        "additionalProperties": false
                      },
                      "approvalRunningNoticeMs": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 9007199254740991
                      }
                    },
                    "additionalProperties": false
                  },
                  "fs": {
                    "type": "object",
                    "properties": {
                      "workspaceOnly": {
                        "type": "boolean"
                      }
                    },
                    "additionalProperties": false
                  },
                  "loopDetection": {
                    "type": "object",
                    "properties": {
                      "enabled": {
                        "type": "boolean"
                      },
                      "historySize": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "warningThreshold": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "criticalThreshold": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "globalCircuitBreakerThreshold": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "detectors": {
                        "type": "object",
                        "properties": {
                          "genericRepeat": {
                            "type": "boolean"
                          },
                          "knownPollNoProgress": {
                            "type": "boolean"
                          },
                          "pingPong": {
                            "type": "boolean"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  },
                  "sandbox": {
                    "type": "object",
                    "properties": {
                      "tools": {
                        "type": "object",
                        "properties": {
                          "allow": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "alsoAllow": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "deny": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            },
            "required": [
              "id"
            ],
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "tools": {
      "type": "object",
      "properties": {
        "profile": {
          "anyOf": [
            {
              "type": "string",
              "const": "minimal"
            },
            {
              "type": "string",
              "const": "coding"
            },
            {
              "type": "string",
              "const": "messaging"
            },
            {
              "type": "string",
              "const": "full"
            }
          ]
        },
        "allow": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "alsoAllow": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "deny": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "byProvider": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "allow": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "alsoAllow": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "deny": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "profile": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "minimal"
                  },
                  {
                    "type": "string",
                    "const": "coding"
                  },
                  {
                    "type": "string",
                    "const": "messaging"
                  },
                  {
                    "type": "string",
                    "const": "full"
                  }
                ]
              }
            },
            "additionalProperties": false
          }
        },
        "web": {
          "type": "object",
          "properties": {
            "search": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "provider": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "brave"
                    },
                    {
                      "type": "string",
                      "const": "perplexity"
                    },
                    {
                      "type": "string",
                      "const": "grok"
                    }
                  ]
                },
                "apiKey": {
                  "type": "string"
                },
                "maxResults": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "timeoutSeconds": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "cacheTtlMinutes": {
                  "type": "number",
                  "minimum": 0
                },
                "perplexity": {
                  "type": "object",
                  "properties": {
                    "apiKey": {
                      "type": "string"
                    },
                    "baseUrl": {
                      "type": "string"
                    },
                    "model": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "grok": {
                  "type": "object",
                  "properties": {
                    "apiKey": {
                      "type": "string"
                    },
                    "model": {
                      "type": "string"
                    },
                    "inlineCitations": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "fetch": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "maxChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxCharsCap": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "timeoutSeconds": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "cacheTtlMinutes": {
                  "type": "number",
                  "minimum": 0
                },
                "maxRedirects": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "userAgent": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "media": {
          "type": "object",
          "properties": {
            "models": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "provider": {
                    "type": "string"
                  },
                  "model": {
                    "type": "string"
                  },
                  "capabilities": {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "image"
                        },
                        {
                          "type": "string",
                          "const": "audio"
                        },
                        {
                          "type": "string",
                          "const": "video"
                        }
                      ]
                    }
                  },
                  "type": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "provider"
                      },
                      {
                        "type": "string",
                        "const": "cli"
                      }
                    ]
                  },
                  "command": {
                    "type": "string"
                  },
                  "args": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "prompt": {
                    "type": "string"
                  },
                  "maxChars": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  },
                  "maxBytes": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  },
                  "timeoutSeconds": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  },
                  "language": {
                    "type": "string"
                  },
                  "providerOptions": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "type": "object",
                      "propertyNames": {
                        "type": "string"
                      },
                      "additionalProperties": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "boolean"
                          }
                        ]
                      }
                    }
                  },
                  "deepgram": {
                    "type": "object",
                    "properties": {
                      "detectLanguage": {
                        "type": "boolean"
                      },
                      "punctuate": {
                        "type": "boolean"
                      },
                      "smartFormat": {
                        "type": "boolean"
                      }
                    },
                    "additionalProperties": false
                  },
                  "baseUrl": {
                    "type": "string"
                  },
                  "headers": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "profile": {
                    "type": "string"
                  },
                  "preferredProfile": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "concurrency": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "image": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "scope": {
                  "type": "object",
                  "properties": {
                    "default": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "allow"
                        },
                        {
                          "type": "string",
                          "const": "deny"
                        }
                      ]
                    },
                    "rules": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "action": {
                            "anyOf": [
                              {
                                "type": "string",
                                "const": "allow"
                              },
                              {
                                "type": "string",
                                "const": "deny"
                              }
                            ]
                          },
                          "match": {
                            "type": "object",
                            "properties": {
                              "channel": {
                                "type": "string"
                              },
                              "chatType": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "direct"
                                  },
                                  {
                                    "type": "string",
                                    "const": "group"
                                  },
                                  {
                                    "type": "string",
                                    "const": "channel"
                                  },
                                  {
                                    "type": "string",
                                    "const": "dm"
                                  }
                                ]
                              },
                              "keyPrefix": {
                                "type": "string"
                              },
                              "rawKeyPrefix": {
                                "type": "string"
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "action"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "maxBytes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "prompt": {
                  "type": "string"
                },
                "timeoutSeconds": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "language": {
                  "type": "string"
                },
                "providerOptions": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        },
                        {
                          "type": "boolean"
                        }
                      ]
                    }
                  }
                },
                "deepgram": {
                  "type": "object",
                  "properties": {
                    "detectLanguage": {
                      "type": "boolean"
                    },
                    "punctuate": {
                      "type": "boolean"
                    },
                    "smartFormat": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                },
                "baseUrl": {
                  "type": "string"
                },
                "headers": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "attachments": {
                  "type": "object",
                  "properties": {
                    "mode": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "first"
                        },
                        {
                          "type": "string",
                          "const": "all"
                        }
                      ]
                    },
                    "maxAttachments": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "prefer": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "first"
                        },
                        {
                          "type": "string",
                          "const": "last"
                        },
                        {
                          "type": "string",
                          "const": "path"
                        },
                        {
                          "type": "string",
                          "const": "url"
                        }
                      ]
                    }
                  },
                  "additionalProperties": false
                },
                "models": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "provider": {
                        "type": "string"
                      },
                      "model": {
                        "type": "string"
                      },
                      "capabilities": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "image"
                            },
                            {
                              "type": "string",
                              "const": "audio"
                            },
                            {
                              "type": "string",
                              "const": "video"
                            }
                          ]
                        }
                      },
                      "type": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "provider"
                          },
                          {
                            "type": "string",
                            "const": "cli"
                          }
                        ]
                      },
                      "command": {
                        "type": "string"
                      },
                      "args": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "prompt": {
                        "type": "string"
                      },
                      "maxChars": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "maxBytes": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "timeoutSeconds": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "language": {
                        "type": "string"
                      },
                      "providerOptions": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "object",
                          "propertyNames": {
                            "type": "string"
                          },
                          "additionalProperties": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "number"
                              },
                              {
                                "type": "boolean"
                              }
                            ]
                          }
                        }
                      },
                      "deepgram": {
                        "type": "object",
                        "properties": {
                          "detectLanguage": {
                            "type": "boolean"
                          },
                          "punctuate": {
                            "type": "boolean"
                          },
                          "smartFormat": {
                            "type": "boolean"
                          }
                        },
                        "additionalProperties": false
                      },
                      "baseUrl": {
                        "type": "string"
                      },
                      "headers": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "profile": {
                        "type": "string"
                      },
                      "preferredProfile": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            },
            "audio": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "scope": {
                  "type": "object",
                  "properties": {
                    "default": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "allow"
                        },
                        {
                          "type": "string",
                          "const": "deny"
                        }
                      ]
                    },
                    "rules": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "action": {
                            "anyOf": [
                              {
                                "type": "string",
                                "const": "allow"
                              },
                              {
                                "type": "string",
                                "const": "deny"
                              }
                            ]
                          },
                          "match": {
                            "type": "object",
                            "properties": {
                              "channel": {
                                "type": "string"
                              },
                              "chatType": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "direct"
                                  },
                                  {
                                    "type": "string",
                                    "const": "group"
                                  },
                                  {
                                    "type": "string",
                                    "const": "channel"
                                  },
                                  {
                                    "type": "string",
                                    "const": "dm"
                                  }
                                ]
                              },
                              "keyPrefix": {
                                "type": "string"
                              },
                              "rawKeyPrefix": {
                                "type": "string"
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "action"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "maxBytes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "prompt": {
                  "type": "string"
                },
                "timeoutSeconds": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "language": {
                  "type": "string"
                },
                "providerOptions": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        },
                        {
                          "type": "boolean"
                        }
                      ]
                    }
                  }
                },
                "deepgram": {
                  "type": "object",
                  "properties": {
                    "detectLanguage": {
                      "type": "boolean"
                    },
                    "punctuate": {
                      "type": "boolean"
                    },
                    "smartFormat": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                },
                "baseUrl": {
                  "type": "string"
                },
                "headers": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "attachments": {
                  "type": "object",
                  "properties": {
                    "mode": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "first"
                        },
                        {
                          "type": "string",
                          "const": "all"
                        }
                      ]
                    },
                    "maxAttachments": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "prefer": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "first"
                        },
                        {
                          "type": "string",
                          "const": "last"
                        },
                        {
                          "type": "string",
                          "const": "path"
                        },
                        {
                          "type": "string",
                          "const": "url"
                        }
                      ]
                    }
                  },
                  "additionalProperties": false
                },
                "models": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "provider": {
                        "type": "string"
                      },
                      "model": {
                        "type": "string"
                      },
                      "capabilities": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "image"
                            },
                            {
                              "type": "string",
                              "const": "audio"
                            },
                            {
                              "type": "string",
                              "const": "video"
                            }
                          ]
                        }
                      },
                      "type": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "provider"
                          },
                          {
                            "type": "string",
                            "const": "cli"
                          }
                        ]
                      },
                      "command": {
                        "type": "string"
                      },
                      "args": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "prompt": {
                        "type": "string"
                      },
                      "maxChars": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "maxBytes": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "timeoutSeconds": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "language": {
                        "type": "string"
                      },
                      "providerOptions": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "object",
                          "propertyNames": {
                            "type": "string"
                          },
                          "additionalProperties": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "number"
                              },
                              {
                                "type": "boolean"
                              }
                            ]
                          }
                        }
                      },
                      "deepgram": {
                        "type": "object",
                        "properties": {
                          "detectLanguage": {
                            "type": "boolean"
                          },
                          "punctuate": {
                            "type": "boolean"
                          },
                          "smartFormat": {
                            "type": "boolean"
                          }
                        },
                        "additionalProperties": false
                      },
                      "baseUrl": {
                        "type": "string"
                      },
                      "headers": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "profile": {
                        "type": "string"
                      },
                      "preferredProfile": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            },
            "video": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "scope": {
                  "type": "object",
                  "properties": {
                    "default": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "allow"
                        },
                        {
                          "type": "string",
                          "const": "deny"
                        }
                      ]
                    },
                    "rules": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "action": {
                            "anyOf": [
                              {
                                "type": "string",
                                "const": "allow"
                              },
                              {
                                "type": "string",
                                "const": "deny"
                              }
                            ]
                          },
                          "match": {
                            "type": "object",
                            "properties": {
                              "channel": {
                                "type": "string"
                              },
                              "chatType": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "direct"
                                  },
                                  {
                                    "type": "string",
                                    "const": "group"
                                  },
                                  {
                                    "type": "string",
                                    "const": "channel"
                                  },
                                  {
                                    "type": "string",
                                    "const": "dm"
                                  }
                                ]
                              },
                              "keyPrefix": {
                                "type": "string"
                              },
                              "rawKeyPrefix": {
                                "type": "string"
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "action"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "maxBytes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "prompt": {
                  "type": "string"
                },
                "timeoutSeconds": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "language": {
                  "type": "string"
                },
                "providerOptions": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "anyOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        },
                        {
                          "type": "boolean"
                        }
                      ]
                    }
                  }
                },
                "deepgram": {
                  "type": "object",
                  "properties": {
                    "detectLanguage": {
                      "type": "boolean"
                    },
                    "punctuate": {
                      "type": "boolean"
                    },
                    "smartFormat": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                },
                "baseUrl": {
                  "type": "string"
                },
                "headers": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "attachments": {
                  "type": "object",
                  "properties": {
                    "mode": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "first"
                        },
                        {
                          "type": "string",
                          "const": "all"
                        }
                      ]
                    },
                    "maxAttachments": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "prefer": {
                      "anyOf": [
                        {
                          "type": "string",
                          "const": "first"
                        },
                        {
                          "type": "string",
                          "const": "last"
                        },
                        {
                          "type": "string",
                          "const": "path"
                        },
                        {
                          "type": "string",
                          "const": "url"
                        }
                      ]
                    }
                  },
                  "additionalProperties": false
                },
                "models": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "provider": {
                        "type": "string"
                      },
                      "model": {
                        "type": "string"
                      },
                      "capabilities": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "image"
                            },
                            {
                              "type": "string",
                              "const": "audio"
                            },
                            {
                              "type": "string",
                              "const": "video"
                            }
                          ]
                        }
                      },
                      "type": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "provider"
                          },
                          {
                            "type": "string",
                            "const": "cli"
                          }
                        ]
                      },
                      "command": {
                        "type": "string"
                      },
                      "args": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "prompt": {
                        "type": "string"
                      },
                      "maxChars": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "maxBytes": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "timeoutSeconds": {
                        "type": "integer",
                        "exclusiveMinimum": 0,
                        "maximum": 9007199254740991
                      },
                      "language": {
                        "type": "string"
                      },
                      "providerOptions": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "object",
                          "propertyNames": {
                            "type": "string"
                          },
                          "additionalProperties": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "number"
                              },
                              {
                                "type": "boolean"
                              }
                            ]
                          }
                        }
                      },
                      "deepgram": {
                        "type": "object",
                        "properties": {
                          "detectLanguage": {
                            "type": "boolean"
                          },
                          "punctuate": {
                            "type": "boolean"
                          },
                          "smartFormat": {
                            "type": "boolean"
                          }
                        },
                        "additionalProperties": false
                      },
                      "baseUrl": {
                        "type": "string"
                      },
                      "headers": {
                        "type": "object",
                        "propertyNames": {
                          "type": "string"
                        },
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "profile": {
                        "type": "string"
                      },
                      "preferredProfile": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "links": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "scope": {
              "type": "object",
              "properties": {
                "default": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "allow"
                    },
                    {
                      "type": "string",
                      "const": "deny"
                    }
                  ]
                },
                "rules": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "action": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "allow"
                          },
                          {
                            "type": "string",
                            "const": "deny"
                          }
                        ]
                      },
                      "match": {
                        "type": "object",
                        "properties": {
                          "channel": {
                            "type": "string"
                          },
                          "chatType": {
                            "anyOf": [
                              {
                                "type": "string",
                                "const": "direct"
                              },
                              {
                                "type": "string",
                                "const": "group"
                              },
                              {
                                "type": "string",
                                "const": "channel"
                              },
                              {
                                "type": "string",
                                "const": "dm"
                              }
                            ]
                          },
                          "keyPrefix": {
                            "type": "string"
                          },
                          "rawKeyPrefix": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "required": [
                      "action"
                    ],
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            },
            "maxLinks": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "timeoutSeconds": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "models": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "cli"
                  },
                  "command": {
                    "type": "string",
                    "minLength": 1
                  },
                  "args": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "timeoutSeconds": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  }
                },
                "required": [
                  "command"
                ],
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "sessions": {
          "type": "object",
          "properties": {
            "visibility": {
              "type": "string",
              "enum": [
                "self",
                "tree",
                "agent",
                "all"
              ]
            }
          },
          "additionalProperties": false
        },
        "loopDetection": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "historySize": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "warningThreshold": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "criticalThreshold": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "globalCircuitBreakerThreshold": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "detectors": {
              "type": "object",
              "properties": {
                "genericRepeat": {
                  "type": "boolean"
                },
                "knownPollNoProgress": {
                  "type": "boolean"
                },
                "pingPong": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "message": {
          "type": "object",
          "properties": {
            "allowCrossContextSend": {
              "type": "boolean"
            },
            "crossContext": {
              "type": "object",
              "properties": {
                "allowWithinProvider": {
                  "type": "boolean"
                },
                "allowAcrossProviders": {
                  "type": "boolean"
                },
                "marker": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "prefix": {
                      "type": "string"
                    },
                    "suffix": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "broadcast": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "agentToAgent": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "elevated": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "allowFrom": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "number"
                    }
                  ]
                }
              }
            }
          },
          "additionalProperties": false
        },
        "exec": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string",
              "enum": [
                "sandbox",
                "gateway",
                "node"
              ]
            },
            "security": {
              "type": "string",
              "enum": [
                "deny",
                "allowlist",
                "full"
              ]
            },
            "ask": {
              "type": "string",
              "enum": [
                "off",
                "on-miss",
                "always"
              ]
            },
            "node": {
              "type": "string"
            },
            "pathPrepend": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "safeBins": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "backgroundMs": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "timeoutSec": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "cleanupMs": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "notifyOnExit": {
              "type": "boolean"
            },
            "notifyOnExitEmptySuccess": {
              "type": "boolean"
            },
            "applyPatch": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "workspaceOnly": {
                  "type": "boolean"
                },
                "allowModels": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "fs": {
          "type": "object",
          "properties": {
            "workspaceOnly": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        "subagents": {
          "type": "object",
          "properties": {
            "tools": {
              "type": "object",
              "properties": {
                "allow": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "alsoAllow": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "deny": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "sandbox": {
          "type": "object",
          "properties": {
            "tools": {
              "type": "object",
              "properties": {
                "allow": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "alsoAllow": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "deny": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "bindings": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "agentId": {
            "type": "string"
          },
          "match": {
            "type": "object",
            "properties": {
              "channel": {
                "type": "string"
              },
              "accountId": {
                "type": "string"
              },
              "peer": {
                "type": "object",
                "properties": {
                  "kind": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "direct"
                      },
                      {
                        "type": "string",
                        "const": "group"
                      },
                      {
                        "type": "string",
                        "const": "channel"
                      },
                      {
                        "type": "string",
                        "const": "dm"
                      }
                    ]
                  },
                  "id": {
                    "type": "string"
                  }
                },
                "required": [
                  "kind",
                  "id"
                ],
                "additionalProperties": false
              },
              "guildId": {
                "type": "string"
              },
              "teamId": {
                "type": "string"
              },
              "roles": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "channel"
            ],
            "additionalProperties": false
          }
        },
        "required": [
          "agentId",
          "match"
        ],
        "additionalProperties": false
      }
    },
    "broadcast": {
      "type": "object",
      "properties": {
        "strategy": {
          "type": "string",
          "enum": [
            "parallel",
            "sequential"
          ]
        }
      },
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    },
    "audio": {
      "type": "object",
      "properties": {
        "transcription": {
          "type": "object",
          "properties": {
            "command": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "timeoutSeconds": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "required": [
            "command"
          ],
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "media": {
      "type": "object",
      "properties": {
        "preserveFilenames": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "messages": {
      "type": "object",
      "properties": {
        "messagePrefix": {
          "type": "string"
        },
        "responsePrefix": {
          "type": "string"
        },
        "groupChat": {
          "type": "object",
          "properties": {
            "mentionPatterns": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "historyLimit": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "queue": {
          "type": "object",
          "properties": {
            "mode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "steer"
                },
                {
                  "type": "string",
                  "const": "followup"
                },
                {
                  "type": "string",
                  "const": "collect"
                },
                {
                  "type": "string",
                  "const": "steer-backlog"
                },
                {
                  "type": "string",
                  "const": "steer+backlog"
                },
                {
                  "type": "string",
                  "const": "queue"
                },
                {
                  "type": "string",
                  "const": "interrupt"
                }
              ]
            },
            "byChannel": {
              "type": "object",
              "properties": {
                "whatsapp": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "telegram": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "discord": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "irc": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "slack": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "mattermost": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "signal": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "imessage": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "msteams": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                },
                "webchat": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "steer"
                    },
                    {
                      "type": "string",
                      "const": "followup"
                    },
                    {
                      "type": "string",
                      "const": "collect"
                    },
                    {
                      "type": "string",
                      "const": "steer-backlog"
                    },
                    {
                      "type": "string",
                      "const": "steer+backlog"
                    },
                    {
                      "type": "string",
                      "const": "queue"
                    },
                    {
                      "type": "string",
                      "const": "interrupt"
                    }
                  ]
                }
              },
              "additionalProperties": false
            },
            "debounceMs": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            },
            "debounceMsByChannel": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991
              }
            },
            "cap": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "drop": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "old"
                },
                {
                  "type": "string",
                  "const": "new"
                },
                {
                  "type": "string",
                  "const": "summarize"
                }
              ]
            }
          },
          "additionalProperties": false
        },
        "inbound": {
          "type": "object",
          "properties": {
            "debounceMs": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            },
            "byChannel": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991
              }
            }
          },
          "additionalProperties": false
        },
        "ackReaction": {
          "type": "string"
        },
        "ackReactionScope": {
          "type": "string",
          "enum": [
            "group-mentions",
            "group-all",
            "direct",
            "all"
          ]
        },
        "removeAckAfterReply": {
          "type": "boolean"
        },
        "suppressToolErrors": {
          "type": "boolean"
        },
        "tts": {
          "type": "object",
          "properties": {
            "auto": {
              "type": "string",
              "enum": [
                "off",
                "always",
                "inbound",
                "tagged"
              ]
            },
            "enabled": {
              "type": "boolean"
            },
            "mode": {
              "type": "string",
              "enum": [
                "final",
                "all"
              ]
            },
            "provider": {
              "type": "string",
              "enum": [
                "elevenlabs",
                "openai",
                "edge"
              ]
            },
            "summaryModel": {
              "type": "string"
            },
            "modelOverrides": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "allowText": {
                  "type": "boolean"
                },
                "allowProvider": {
                  "type": "boolean"
                },
                "allowVoice": {
                  "type": "boolean"
                },
                "allowModelId": {
                  "type": "boolean"
                },
                "allowVoiceSettings": {
                  "type": "boolean"
                },
                "allowNormalization": {
                  "type": "boolean"
                },
                "allowSeed": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false
            },
            "elevenlabs": {
              "type": "object",
              "properties": {
                "apiKey": {
                  "type": "string"
                },
                "baseUrl": {
                  "type": "string"
                },
                "voiceId": {
                  "type": "string"
                },
                "modelId": {
                  "type": "string"
                },
                "seed": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 4294967295
                },
                "applyTextNormalization": {
                  "type": "string",
                  "enum": [
                    "auto",
                    "on",
                    "off"
                  ]
                },
                "languageCode": {
                  "type": "string"
                },
                "voiceSettings": {
                  "type": "object",
                  "properties": {
                    "stability": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "similarityBoost": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "style": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "useSpeakerBoost": {
                      "type": "boolean"
                    },
                    "speed": {
                      "type": "number",
                      "minimum": 0.5,
                      "maximum": 2
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "openai": {
              "type": "object",
              "properties": {
                "apiKey": {
                  "type": "string"
                },
                "model": {
                  "type": "string"
                },
                "voice": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "edge": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "voice": {
                  "type": "string"
                },
                "lang": {
                  "type": "string"
                },
                "outputFormat": {
                  "type": "string"
                },
                "pitch": {
                  "type": "string"
                },
                "rate": {
                  "type": "string"
                },
                "volume": {
                  "type": "string"
                },
                "saveSubtitles": {
                  "type": "boolean"
                },
                "proxy": {
                  "type": "string"
                },
                "timeoutMs": {
                  "type": "integer",
                  "minimum": 1000,
                  "maximum": 120000
                }
              },
              "additionalProperties": false
            },
            "prefsPath": {
              "type": "string"
            },
            "maxTextLength": {
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            },
            "timeoutMs": {
              "type": "integer",
              "minimum": 1000,
              "maximum": 120000
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "commands": {
      "default": {
        "native": "auto",
        "nativeSkills": "auto"
      },
      "type": "object",
      "properties": {
        "native": {
          "default": "auto",
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string",
              "const": "auto"
            }
          ]
        },
        "nativeSkills": {
          "default": "auto",
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string",
              "const": "auto"
            }
          ]
        },
        "text": {
          "type": "boolean"
        },
        "bash": {
          "type": "boolean"
        },
        "bashForegroundMs": {
          "type": "integer",
          "minimum": 0,
          "maximum": 30000
        },
        "config": {
          "type": "boolean"
        },
        "debug": {
          "type": "boolean"
        },
        "restart": {
          "type": "boolean"
        },
        "useAccessGroups": {
          "type": "boolean"
        },
        "ownerAllowFrom": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              }
            ]
          }
        },
        "allowFrom": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                }
              ]
            }
          }
        }
      },
      "required": [
        "native",
        "nativeSkills"
      ],
      "additionalProperties": false
    },
    "approvals": {
      "type": "object",
      "properties": {
        "exec": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "mode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "session"
                },
                {
                  "type": "string",
                  "const": "targets"
                },
                {
                  "type": "string",
                  "const": "both"
                }
              ]
            },
            "agentFilter": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "sessionFilter": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "targets": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "channel": {
                    "type": "string",
                    "minLength": 1
                  },
                  "to": {
                    "type": "string",
                    "minLength": 1
                  },
                  "accountId": {
                    "type": "string"
                  },
                  "threadId": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "number"
                      }
                    ]
                  }
                },
                "required": [
                  "channel",
                  "to"
                ],
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "session": {
      "type": "object",
      "properties": {
        "scope": {
          "anyOf": [
            {
              "type": "string",
              "const": "per-sender"
            },
            {
              "type": "string",
              "const": "global"
            }
          ]
        },
        "dmScope": {
          "anyOf": [
            {
              "type": "string",
              "const": "main"
            },
            {
              "type": "string",
              "const": "per-peer"
            },
            {
              "type": "string",
              "const": "per-channel-peer"
            },
            {
              "type": "string",
              "const": "per-account-channel-peer"
            }
          ]
        },
        "identityLinks": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "resetTriggers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "idleMinutes": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "reset": {
          "type": "object",
          "properties": {
            "mode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "daily"
                },
                {
                  "type": "string",
                  "const": "idle"
                }
              ]
            },
            "atHour": {
              "type": "integer",
              "minimum": 0,
              "maximum": 23
            },
            "idleMinutes": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "resetByType": {
          "type": "object",
          "properties": {
            "direct": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "daily"
                    },
                    {
                      "type": "string",
                      "const": "idle"
                    }
                  ]
                },
                "atHour": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 23
                },
                "idleMinutes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "dm": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "daily"
                    },
                    {
                      "type": "string",
                      "const": "idle"
                    }
                  ]
                },
                "atHour": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 23
                },
                "idleMinutes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "group": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "daily"
                    },
                    {
                      "type": "string",
                      "const": "idle"
                    }
                  ]
                },
                "atHour": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 23
                },
                "idleMinutes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "thread": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "daily"
                    },
                    {
                      "type": "string",
                      "const": "idle"
                    }
                  ]
                },
                "atHour": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 23
                },
                "idleMinutes": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "resetByChannel": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "mode": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "daily"
                  },
                  {
                    "type": "string",
                    "const": "idle"
                  }
                ]
              },
              "atHour": {
                "type": "integer",
                "minimum": 0,
                "maximum": 23
              },
              "idleMinutes": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "maximum": 9007199254740991
              }
            },
            "additionalProperties": false
          }
        },
        "store": {
          "type": "string"
        },
        "typingIntervalSeconds": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "typingMode": {
          "anyOf": [
            {
              "type": "string",
              "const": "never"
            },
            {
              "type": "string",
              "const": "instant"
            },
            {
              "type": "string",
              "const": "thinking"
            },
            {
              "type": "string",
              "const": "message"
            }
          ]
        },
        "mainKey": {
          "type": "string"
        },
        "sendPolicy": {
          "type": "object",
          "properties": {
            "default": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "allow"
                },
                {
                  "type": "string",
                  "const": "deny"
                }
              ]
            },
            "rules": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "action": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "allow"
                      },
                      {
                        "type": "string",
                        "const": "deny"
                      }
                    ]
                  },
                  "match": {
                    "type": "object",
                    "properties": {
                      "channel": {
                        "type": "string"
                      },
                      "chatType": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "direct"
                          },
                          {
                            "type": "string",
                            "const": "group"
                          },
                          {
                            "type": "string",
                            "const": "channel"
                          },
                          {
                            "type": "string",
                            "const": "dm"
                          }
                        ]
                      },
                      "keyPrefix": {
                        "type": "string"
                      },
                      "rawKeyPrefix": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "required": [
                  "action"
                ],
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "agentToAgent": {
          "type": "object",
          "properties": {
            "maxPingPongTurns": {
              "type": "integer",
              "minimum": 0,
              "maximum": 5
            }
          },
          "additionalProperties": false
        },
        "maintenance": {
          "type": "object",
          "properties": {
            "mode": {
              "type": "string",
              "enum": [
                "enforce",
                "warn"
              ]
            },
            "pruneAfter": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                }
              ]
            },
            "pruneDays": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "maxEntries": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "rotateBytes": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                }
              ]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "cron": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "store": {
          "type": "string"
        },
        "maxConcurrentRuns": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "webhook": {
          "type": "string",
          "format": "uri"
        },
        "webhookToken": {
          "type": "string"
        },
        "sessionRetention": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "boolean",
              "const": false
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "hooks": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "path": {
          "type": "string"
        },
        "token": {
          "type": "string"
        },
        "defaultSessionKey": {
          "type": "string"
        },
        "allowRequestSessionKey": {
          "type": "boolean"
        },
        "allowedSessionKeyPrefixes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "allowedAgentIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "maxBodyBytes": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "presets": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "transformsDir": {
          "type": "string"
        },
        "mappings": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "match": {
                "type": "object",
                "properties": {
                  "path": {
                    "type": "string"
                  },
                  "source": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "action": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "wake"
                  },
                  {
                    "type": "string",
                    "const": "agent"
                  }
                ]
              },
              "wakeMode": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "now"
                  },
                  {
                    "type": "string",
                    "const": "next-heartbeat"
                  }
                ]
              },
              "name": {
                "type": "string"
              },
              "agentId": {
                "type": "string"
              },
              "sessionKey": {
                "type": "string"
              },
              "messageTemplate": {
                "type": "string"
              },
              "textTemplate": {
                "type": "string"
              },
              "deliver": {
                "type": "boolean"
              },
              "allowUnsafeExternalContent": {
                "type": "boolean"
              },
              "channel": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "last"
                  },
                  {
                    "type": "string",
                    "const": "whatsapp"
                  },
                  {
                    "type": "string",
                    "const": "telegram"
                  },
                  {
                    "type": "string",
                    "const": "discord"
                  },
                  {
                    "type": "string",
                    "const": "irc"
                  },
                  {
                    "type": "string",
                    "const": "slack"
                  },
                  {
                    "type": "string",
                    "const": "signal"
                  },
                  {
                    "type": "string",
                    "const": "imessage"
                  },
                  {
                    "type": "string",
                    "const": "msteams"
                  }
                ]
              },
              "to": {
                "type": "string"
              },
              "model": {
                "type": "string"
              },
              "thinking": {
                "type": "string"
              },
              "timeoutSeconds": {
                "type": "integer",
                "exclusiveMinimum": 0,
                "maximum": 9007199254740991
              },
              "transform": {
                "type": "object",
                "properties": {
                  "module": {
                    "type": "string"
                  },
                  "export": {
                    "type": "string"
                  }
                },
                "required": [
                  "module"
                ],
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        },
        "gmail": {
          "type": "object",
          "properties": {
            "account": {
              "type": "string"
            },
            "label": {
              "type": "string"
            },
            "topic": {
              "type": "string"
            },
            "subscription": {
              "type": "string"
            },
            "pushToken": {
              "type": "string"
            },
            "hookUrl": {
              "type": "string"
            },
            "includeBody": {
              "type": "boolean"
            },
            "maxBytes": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "renewEveryMinutes": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "allowUnsafeExternalContent": {
              "type": "boolean"
            },
            "serve": {
              "type": "object",
              "properties": {
                "bind": {
                  "type": "string"
                },
                "port": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "path": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "tailscale": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "off"
                    },
                    {
                      "type": "string",
                      "const": "serve"
                    },
                    {
                      "type": "string",
                      "const": "funnel"
                    }
                  ]
                },
                "path": {
                  "type": "string"
                },
                "target": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "model": {
              "type": "string"
            },
            "thinking": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "minimal"
                },
                {
                  "type": "string",
                  "const": "low"
                },
                {
                  "type": "string",
                  "const": "medium"
                },
                {
                  "type": "string",
                  "const": "high"
                }
              ]
            }
          },
          "additionalProperties": false
        },
        "internal": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "handlers": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "event": {
                    "type": "string"
                  },
                  "module": {
                    "type": "string"
                  },
                  "export": {
                    "type": "string"
                  }
                },
                "required": [
                  "event",
                  "module"
                ],
                "additionalProperties": false
              }
            },
            "entries": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  },
                  "env": {
                    "type": "object",
                    "propertyNames": {
                      "type": "string"
                    },
                    "additionalProperties": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": {}
              }
            },
            "load": {
              "type": "object",
              "properties": {
                "extraDirs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "installs": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "source": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "npm"
                      },
                      {
                        "type": "string",
                        "const": "archive"
                      },
                      {
                        "type": "string",
                        "const": "path"
                      }
                    ]
                  },
                  "spec": {
                    "type": "string"
                  },
                  "sourcePath": {
                    "type": "string"
                  },
                  "installPath": {
                    "type": "string"
                  },
                  "version": {
                    "type": "string"
                  },
                  "installedAt": {
                    "type": "string"
                  },
                  "hooks": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "source"
                ],
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "web": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "heartbeatSeconds": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "reconnect": {
          "type": "object",
          "properties": {
            "initialMs": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "maxMs": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "factor": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "jitter": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "maxAttempts": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "channels": {
      "type": "object",
      "properties": {},
      "additionalProperties": true,
      "required": []
    },
    "discovery": {
      "type": "object",
      "properties": {
        "wideArea": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        "mdns": {
          "type": "object",
          "properties": {
            "mode": {
              "type": "string",
              "enum": [
                "off",
                "minimal",
                "full"
              ]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "canvasHost": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "root": {
          "type": "string"
        },
        "port": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "liveReload": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "talk": {
      "type": "object",
      "properties": {
        "voiceId": {
          "type": "string"
        },
        "voiceAliases": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "string"
          }
        },
        "modelId": {
          "type": "string"
        },
        "outputFormat": {
          "type": "string"
        },
        "apiKey": {
          "type": "string"
        },
        "interruptOnSpeech": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "gateway": {
      "type": "object",
      "properties": {
        "port": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "mode": {
          "anyOf": [
            {
              "type": "string",
              "const": "local"
            },
            {
              "type": "string",
              "const": "remote"
            }
          ]
        },
        "bind": {
          "anyOf": [
            {
              "type": "string",
              "const": "auto"
            },
            {
              "type": "string",
              "const": "lan"
            },
            {
              "type": "string",
              "const": "loopback"
            },
            {
              "type": "string",
              "const": "custom"
            },
            {
              "type": "string",
              "const": "tailnet"
            }
          ]
        },
        "controlUi": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "basePath": {
              "type": "string"
            },
            "root": {
              "type": "string"
            },
            "allowedOrigins": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "allowInsecureAuth": {
              "type": "boolean"
            },
            "dangerouslyDisableDeviceAuth": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        "auth": {
          "type": "object",
          "properties": {
            "mode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "token"
                },
                {
                  "type": "string",
                  "const": "password"
                },
                {
                  "type": "string",
                  "const": "trusted-proxy"
                }
              ]
            },
            "token": {
              "type": "string"
            },
            "password": {
              "type": "string"
            },
            "allowTailscale": {
              "type": "boolean"
            },
            "rateLimit": {
              "type": "object",
              "properties": {
                "maxAttempts": {
                  "type": "number"
                },
                "windowMs": {
                  "type": "number"
                },
                "lockoutMs": {
                  "type": "number"
                },
                "exemptLoopback": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false
            },
            "trustedProxy": {
              "type": "object",
              "properties": {
                "userHeader": {
                  "type": "string",
                  "minLength": 1
                },
                "requiredHeaders": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "allowUsers": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "userHeader"
              ],
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "trustedProxies": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "tools": {
          "type": "object",
          "properties": {
            "deny": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "channelHealthCheckMinutes": {
          "type": "integer",
          "minimum": 0,
          "maximum": 9007199254740991
        },
        "tailscale": {
          "type": "object",
          "properties": {
            "mode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "serve"
                },
                {
                  "type": "string",
                  "const": "funnel"
                }
              ]
            },
            "resetOnExit": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        "remote": {
          "type": "object",
          "properties": {
            "url": {
              "type": "string"
            },
            "transport": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "ssh"
                },
                {
                  "type": "string",
                  "const": "direct"
                }
              ]
            },
            "token": {
              "type": "string"
            },
            "password": {
              "type": "string"
            },
            "tlsFingerprint": {
              "type": "string"
            },
            "sshTarget": {
              "type": "string"
            },
            "sshIdentity": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "reload": {
          "type": "object",
          "properties": {
            "mode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "off"
                },
                {
                  "type": "string",
                  "const": "restart"
                },
                {
                  "type": "string",
                  "const": "hot"
                },
                {
                  "type": "string",
                  "const": "hybrid"
                }
              ]
            },
            "debounceMs": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "tls": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "autoGenerate": {
              "type": "boolean"
            },
            "certPath": {
              "type": "string"
            },
            "keyPath": {
              "type": "string"
            },
            "caPath": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "http": {
          "type": "object",
          "properties": {
            "endpoints": {
              "type": "object",
              "properties": {
                "chatCompletions": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    }
                  },
                  "additionalProperties": false
                },
                "responses": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "type": "boolean"
                    },
                    "maxBodyBytes": {
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "maxUrlParts": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 9007199254740991
                    },
                    "files": {
                      "type": "object",
                      "properties": {
                        "allowUrl": {
                          "type": "boolean"
                        },
                        "urlAllowlist": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "allowedMimes": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "maxBytes": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "maxChars": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "maxRedirects": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 9007199254740991
                        },
                        "timeoutMs": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "pdf": {
                          "type": "object",
                          "properties": {
                            "maxPages": {
                              "type": "integer",
                              "exclusiveMinimum": 0,
                              "maximum": 9007199254740991
                            },
                            "maxPixels": {
                              "type": "integer",
                              "exclusiveMinimum": 0,
                              "maximum": 9007199254740991
                            },
                            "minTextChars": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 9007199254740991
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "additionalProperties": false
                    },
                    "images": {
                      "type": "object",
                      "properties": {
                        "allowUrl": {
                          "type": "boolean"
                        },
                        "urlAllowlist": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "allowedMimes": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "maxBytes": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "maxRedirects": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 9007199254740991
                        },
                        "timeoutMs": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "nodes": {
          "type": "object",
          "properties": {
            "browser": {
              "type": "object",
              "properties": {
                "mode": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "auto"
                    },
                    {
                      "type": "string",
                      "const": "manual"
                    },
                    {
                      "type": "string",
                      "const": "off"
                    }
                  ]
                },
                "node": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "allowCommands": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "denyCommands": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "memory": {
      "type": "object",
      "properties": {
        "backend": {
          "anyOf": [
            {
              "type": "string",
              "const": "builtin"
            },
            {
              "type": "string",
              "const": "qmd"
            }
          ]
        },
        "citations": {
          "anyOf": [
            {
              "type": "string",
              "const": "auto"
            },
            {
              "type": "string",
              "const": "on"
            },
            {
              "type": "string",
              "const": "off"
            }
          ]
        },
        "qmd": {
          "type": "object",
          "properties": {
            "command": {
              "type": "string"
            },
            "searchMode": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "query"
                },
                {
                  "type": "string",
                  "const": "search"
                },
                {
                  "type": "string",
                  "const": "vsearch"
                }
              ]
            },
            "includeDefaultMemory": {
              "type": "boolean"
            },
            "paths": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "path": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "pattern": {
                    "type": "string"
                  }
                },
                "required": [
                  "path"
                ],
                "additionalProperties": false
              }
            },
            "sessions": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "exportDir": {
                  "type": "string"
                },
                "retentionDays": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "update": {
              "type": "object",
              "properties": {
                "interval": {
                  "type": "string"
                },
                "debounceMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "onBoot": {
                  "type": "boolean"
                },
                "waitForBootSync": {
                  "type": "boolean"
                },
                "embedInterval": {
                  "type": "string"
                },
                "commandTimeoutMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "updateTimeoutMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "embedTimeoutMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "limits": {
              "type": "object",
              "properties": {
                "maxResults": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxSnippetChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxInjectedChars": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "timeoutMs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "scope": {
              "type": "object",
              "properties": {
                "default": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "allow"
                    },
                    {
                      "type": "string",
                      "const": "deny"
                    }
                  ]
                },
                "rules": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "action": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "allow"
                          },
                          {
                            "type": "string",
                            "const": "deny"
                          }
                        ]
                      },
                      "match": {
                        "type": "object",
                        "properties": {
                          "channel": {
                            "type": "string"
                          },
                          "chatType": {
                            "anyOf": [
                              {
                                "type": "string",
                                "const": "direct"
                              },
                              {
                                "type": "string",
                                "const": "group"
                              },
                              {
                                "type": "string",
                                "const": "channel"
                              },
                              {
                                "type": "string",
                                "const": "dm"
                              }
                            ]
                          },
                          "keyPrefix": {
                            "type": "string"
                          },
                          "rawKeyPrefix": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "required": [
                      "action"
                    ],
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "skills": {
      "type": "object",
      "properties": {
        "allowBundled": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "load": {
          "type": "object",
          "properties": {
            "extraDirs": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "watch": {
              "type": "boolean"
            },
            "watchDebounceMs": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "install": {
          "type": "object",
          "properties": {
            "preferBrew": {
              "type": "boolean"
            },
            "nodeManager": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "npm"
                },
                {
                  "type": "string",
                  "const": "pnpm"
                },
                {
                  "type": "string",
                  "const": "yarn"
                },
                {
                  "type": "string",
                  "const": "bun"
                }
              ]
            }
          },
          "additionalProperties": false
        },
        "limits": {
          "type": "object",
          "properties": {
            "maxCandidatesPerRoot": {
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            },
            "maxSkillsLoadedPerSource": {
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            },
            "maxSkillsInPrompt": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            },
            "maxSkillsPromptChars": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            },
            "maxSkillFileBytes": {
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "entries": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "enabled": {
                "type": "boolean"
              },
              "apiKey": {
                "type": "string"
              },
              "env": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {
                  "type": "string"
                }
              },
              "config": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {}
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "plugins": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "allow": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "deny": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "load": {
          "type": "object",
          "properties": {
            "paths": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "slots": {
          "type": "object",
          "properties": {
            "memory": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "entries": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "enabled": {
                "type": "boolean"
              },
              "config": {
                "type": "object",
                "propertyNames": {
                  "type": "string"
                },
                "additionalProperties": {}
              }
            },
            "additionalProperties": false
          }
        },
        "installs": {
          "type": "object",
          "propertyNames": {
            "type": "string"
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "source": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "npm"
                  },
                  {
                    "type": "string",
                    "const": "archive"
                  },
                  {
                    "type": "string",
                    "const": "path"
                  }
                ]
              },
              "spec": {
                "type": "string"
              },
              "sourcePath": {
                "type": "string"
              },
              "installPath": {
                "type": "string"
              },
              "version": {
                "type": "string"
              },
              "installedAt": {
                "type": "string"
              }
            },
            "required": [
              "source"
            ],
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "$schema": {
      "type": "string"
    }
  },
  "required": [
    "commands"
  ],
  "additionalProperties": false,
  "title": "OpenClawConfig"
}