{
  "name": "openclaw-config-vscode",
  "displayName": "OpenClaw Config",
  "description": "Lightweight VS Code support for openclaw.json with live schema updates and Zod shadow diagnostics.",
  "version": "0.1.3",
  "publisher": "jorekai",
  "license": "MIT",
  "icon": "assets/icon.png",
  "keywords": [
    "openclaw",
    "json",
    "configuration",
    "schema",
    "validation",
    "vscode-extension"
  ],
  "engines": {
    "vscode": "^1.95.0"
  },
  "categories": [
    "Programming Languages",
    "Other"
  ],
  "activationEvents": [
    "workspaceContains:**/openclaw.json",
    "onLanguage:json",
    "onLanguage:jsonc",
    "onCommand:openclawConfig.newConfig",
    "onCommand:openclawConfig.refreshSchemaNow",
    "onCommand:openclawConfig.insertSectionSnippet",
    "onCommand:openclawConfig.explainSelection",
    "onCommand:openclawConfig.normalizeConfig",
    "onCommand:openclawConfig.showSchemaStatus"
  ],
  "main": "./dist/extension.js",
  "repository": {
    "type": "git",
    "url": "https://github.com/jorekai/openclaw-config-vscode.git"
  },
  "homepage": "https://github.com/jorekai/openclaw-config-vscode#readme",
  "bugs": {
    "url": "https://github.com/jorekai/openclaw-config-vscode/issues"
  },
  "files": [
    "dist/extension.js",
    "dist/extension.js.map",
    "schemas/live/**",
    "snippets/**",
    "assets/icon.png",
    "README.md",
    "CHANGELOG.md",
    "SECURITY.md",
    "LICENSE",
    "package.json"
  ],
  "contributes": {
    "commands": [
      {
        "command": "openclawConfig.newConfig",
        "title": "OpenClaw: New Config"
      },
      {
        "command": "openclawConfig.refreshSchemaNow",
        "title": "OpenClaw: Refresh Schema Now"
      },
      {
        "command": "openclawConfig.insertSectionSnippet",
        "title": "OpenClaw: Insert Section Snippet"
      },
      {
        "command": "openclawConfig.explainSelection",
        "title": "OpenClaw: Explain Selection"
      },
      {
        "command": "openclawConfig.normalizeConfig",
        "title": "OpenClaw: Normalize Config"
      },
      {
        "command": "openclawConfig.showSchemaStatus",
        "title": "OpenClaw: Show Schema Status"
      }
    ],
    "configuration": {
      "title": "OpenClaw Config",
      "properties": {
        "openclawConfig.zodShadow.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable Zod shadow diagnostics for openclaw.json files."
        },
        "openclawConfig.sync.ttlHours": {
          "type": "number",
          "default": 6,
          "minimum": 1,
          "maximum": 168,
          "description": "Hours to cache live schema artifacts before checking for an update."
        },
        "openclawConfig.sync.manifestUrl": {
          "type": "string",
          "default": "https://raw.githubusercontent.com/jorekai/openclaw-config-vscode/main/schemas/live/manifest.json",
          "description": "Manifest URL used for live schema synchronization."
        },
        "openclawConfig.sync.allowedHosts": {
          "type": "array",
          "default": [
            "raw.githubusercontent.com"
          ],
          "items": {
            "type": "string"
          },
          "description": "Strict allowlist of hosts for manifest and artifact downloads."
        },
        "openclawConfig.sync.allowedRepositories": {
          "type": "array",
          "default": [
            "jorekai/openclaw-config-vscode"
          ],
          "items": {
            "type": "string"
          },
          "description": "Strict allowlist of repositories in remote schema URLs. Use \"*\" to disable repository filtering."
        },
        "openclawConfig.codeActions.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable OpenClaw-specific quick fixes for openclaw.json diagnostics."
        },
        "openclawConfig.integrator.strictSecrets": {
          "type": "boolean",
          "default": false,
          "description": "Treat cleartext secret values as errors instead of warnings."
        },
        "openclawConfig.integrator.explainOnHover": {
          "type": "boolean",
          "default": true,
          "description": "Show context-aware OpenClaw field explanations on hover."
        },
        "openclawConfig.plugins.metadataUrl": {
          "type": "string",
          "default": "",
          "description": "Optional remote plugin metadata URL (versioned JSON hints) for dynamic subfields."
        },
        "openclawConfig.plugins.metadataLocalPath": {
          "type": "string",
          "default": ".openclaw/plugin-hints.json",
          "description": "Workspace-relative path to local plugin metadata hints."
        }
      }
    },
    "jsonValidation": [
      {
        "fileMatch": "**/openclaw.json",
        "url": "openclaw-schema://live/openclaw.schema.json"
      }
    ],
    "snippets": [
      {
        "language": "jsonc",
        "path": "./snippets/openclaw.code-snippets"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "pnpm compile",
    "compile": "tsc -p ./tsconfig.json --noEmit && esbuild src/extension.ts --bundle --platform=node --format=cjs --main-fields=module,main --external:vscode --outfile=dist/extension.js --sourcemap",
    "watch": "esbuild src/extension.ts --bundle --platform=node --format=cjs --main-fields=module,main --external:vscode --outfile=dist/extension.js --sourcemap --watch",
    "lint": "tsc -p ./tsconfig.json --noEmit",
    "docs:dev": "vitepress dev docs",
    "docs:build": "vitepress build docs",
    "docs:preview": "vitepress preview docs",
    "sync:schema": "tsx ./scripts/sync-openclaw-schema.mts",
    "test": "vitest run",
    "test:unit": "vitest run ./test/unit",
    "test:coverage": "vitest run ./test/unit --coverage.enabled true",
    "test:integration": "tsx ./test/integration/runTest.ts",
    "package:verify": "pnpm dlx @vscode/vsce package --no-yarn --no-dependencies --out /tmp/openclaw-config-vscode-${npm_package_version}.vsix",
    "package:vsix": "mkdir -p dist && pnpm dlx @vscode/vsce package --no-yarn --no-dependencies --out /tmp/openclaw-config-vscode-${npm_package_version}.vsix && cp /tmp/openclaw-config-vscode-${npm_package_version}.vsix ./dist/openclaw-config-vscode-${npm_package_version}.vsix",
    "release:gate": "pnpm compile && pnpm test:unit && pnpm test:integration && pnpm package:verify",
    "publish:vsce": "pnpm dlx @vscode/vsce publish --packagePath ./dist/openclaw-config-vscode-${npm_package_version}.vsix --no-yarn --no-dependencies",
    "publish:ovsx": "pnpm dlx ovsx publish ./dist/openclaw-config-vscode-${npm_package_version}.vsix",
    "pretest": "npm run compile"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.8",
    "@types/node": "^24.2.0",
    "@types/vscode": "^1.95.0",
    "@vitest/coverage-v8": "^3.2.4",
    "@vscode/test-electron": "^2.5.2",
    "esbuild": "^0.25.9",
    "mocha": "^10.8.2",
    "tsx": "^4.20.5",
    "typescript": "^5.9.2",
    "vitepress": "^1.6.3",
    "vitest": "^3.2.4"
  },
  "dependencies": {
    "jsonc-parser": "^3.3.1"
  },
  "pnpm": {
    "overrides": {
      "esbuild": "0.25.12",
      "minimatch": "10.2.1"
    }
  }
}
